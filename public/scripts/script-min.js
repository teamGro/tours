let canvasTopElem=document.querySelector(".footer__item-line_top"),canvasBottomElem=document.querySelector(".footer__item-line_bottom");if(canvasTopElem.getContext){let e=canvasTopElem.getContext("2d");e.strokeStyle="rgb(255, 255, 255)",e.lineWidth=5,e.beginPath(),e.moveTo(0,0),e.lineTo(54.5,74),e.lineTo(5e3,74),e.stroke();let t=canvasBottomElem.getContext("2d");t.strokeStyle="rgb(255, 255, 255)",t.lineWidth=5,t.beginPath(),t.moveTo(0,80),t.lineTo(54.5,3),t.lineTo(5e3,3),t.stroke()}let toursFilterBtns=document.querySelector(".tours__btn-wrap"),tours=document.querySelector(".offers"),toursOffers=document.querySelectorAll("[data-country]"),toursFilters=document.querySelector(".filters"),toursBtnArrow=document.querySelector(".tours__btn-arrow"),filterItalyBtn=document.querySelector("#italy");filterItalyBtn.addEventListener("click",function(e){filterHandler(this,e)});let filterIslandBtn=document.querySelector("#island");filterIslandBtn.addEventListener("click",function(e){filterHandler(this,e)});let filterTurkeyBtn=document.querySelector("#turkey");filterTurkeyBtn.addEventListener("click",function(e){filterHandler(this,e)});let filterSpainBtn=document.querySelector("#spain");filterSpainBtn.addEventListener("click",function(e){filterHandler(this,e)});let dataPatterns={name:/^[а-яa-z0-9_-\S]{3,16}$/i,phone:/^((\+?7|8)[ \-]?)?((\(\d{3}\))|(\d{3}))?([ \-])?(\d{3}[\- ]?\d{2}[\- ]?\d{2})$/,country:/^[а-яa-z0-9_-\S]{5,30}$/i},userName=document.querySelector("#user-name");userName.value=localStorage.getItem("user-name")||"",userName.addEventListener("blur",function(){onBlurHandle(this,"form__invalid","name")}),userName.addEventListener("focus",function(){onFocusHandle(this,"form__invalid")});let userWishes=document.querySelector("#user-wishes");userWishes.value=localStorage.getItem("user-country")||"",userWishes.addEventListener("blur",function(){onBlurHandle(this,"form__invalid","country")}),userWishes.addEventListener("focus",function(){onFocusHandle(this,"form__invalid")});let userTel=document.querySelector("#user-tel");userTel.value=localStorage.getItem("user-tel")||"",userTel.addEventListener("blur",function(){""!==this.value.trim()&&(dataPatterns.phone.test(this.value)?localStorage.setItem("user-tel",this.value):this.classList.add("form__invalid"))}),userTel.addEventListener("focus",function(){onFocusHandle(this,"form__invalid")});let connections=document.querySelector(".form__connection");connections.addEventListener("click",function(e){let t=e.target;"SPAN"==t.tagName&&t.classList.contains("chk__input")&&t.classList.toggle("chk__input_active"),"LABEL"===t.tagName&&t.classList.contains("chk__label")&&t.parentNode.querySelector(".chk__input").classList.toggle("chk__input_active")});let contacts=document.querySelector(".form__contact");contacts.addEventListener("click",function(e){let t=e.target;"SPAN"==t.tagName&&t.classList.contains("chk__input")&&t.classList.toggle("chk__input_active"),"LABEL"===t.tagName&&t.classList.contains("chk__label")&&t.parentNode.querySelector(".chk__input").classList.toggle("chk__input_active")});let agreementsSubscibe=document.querySelector(".agreements__input_subscribe");agreementsSubscibe.addEventListener("click",function(){this.classList.toggle("agreements__input_active")});let agreementsHandle=document.querySelector(".agreements__input_handle");agreementsHandle.addEventListener("click",function(){this.classList.toggle("agreements__input_active")});let btnSend=document.querySelector(".btn-send");function filterHandler(e,t){let n=t.target.id;if(e.classList.contains("tours__btn_active")){if(e.classList.remove("tours__btn_active"),null!=e.parentNode.querySelector(".tours__btn_active"))return void Array.from(toursFilters.querySelectorAll(`[data-country=${n}]`)).forEach(e=>{e.parentNode.removeChild(e)});for(tours.style.display="flex",toursBtnArrow.style.display="block";toursFilters.firstChild;)toursFilters.removeChild(toursFilters.firstChild);return}let r=document.createDocumentFragment();Array.from(toursOffers).forEach(e=>{if(e.getAttribute("data-country")==n){let t=e.cloneNode(!0);r.append(t)}}),toursFilters.append(r),toursFilters.style.display="flex",tours.style.display="none",toursBtnArrow.style.display="none",e.classList.add("tours__btn_active")}function onBlurHandle(e,t,n){dataPatterns[n].test(e.value)?localStorage.setItem(`user-${n}`,e.value):e.classList.add(t)}function onFocusHandle(e,t){e.classList.contains(t)&&e.classList.remove(t)}btnSend.addEventListener("click",function(e){e.preventDefault();agreementsHandle.classList.contains("agreements__input_active")||(0,agreementsHandle.classList.add("agreements__input_handle-invalid")),""===userWishes.value.trim()&&(0,userWishes.classList.add("form__invalid")),""===userName.value.trim()&&(0,userName.classList.add("form__invalid"))}),new Glide(".glide2",{bound:!0,startAt:0,breakpoints:{2000:{perView:2},1023:{perView:3},767:{perView:2}}}).mount(),new Glide(".glide",{}).mount();